# Alert Templates Configuration
# This file contains example alert message templates

# CPU Alert Template
cpu_alert_template:
  id: "cpu-alert-template"
  name: "CPU Usage Alert"
  subject: "ğŸš¨ High CPU Usage Alert - {{.BudgetName}}"
  body: |
    CPU usage has exceeded the configured threshold.
    
    ğŸ“Š Details:
    â€¢ Budget: {{.BudgetName}}
    â€¢ Scope: {{.Scope}}:{{.ScopeID}}
    â€¢ Current Usage: {{.PercentageUsed}}%
    â€¢ Threshold: 80%
    â€¢ Severity: {{.Severity}}
    â€¢ Timestamp: {{.Timestamp}}
    
    ğŸ”§ Recommended Actions:
    â€¢ Check for resource-intensive workflows
    â€¢ Review system load and scaling options
    â€¢ Consider increasing resource limits if appropriate
    
    ğŸ“ˆ This alert will not repeat for 5 minutes.
  format: "text"

# Memory Alert Template
memory_alert_template:
  id: "memory-alert-template"
  name: "Memory Usage Alert"
  subject: "âš ï¸ High Memory Usage Alert - {{.BudgetName}}"
  body: |
    Memory usage has exceeded the configured threshold.
    
    ğŸ“Š Details:
    â€¢ Budget: {{.BudgetName}}
    â€¢ Scope: {{.Scope}}:{{.ScopeID}}
    â€¢ Current Usage: {{.PercentageUsed}}%
    â€¢ Threshold: 85%
    â€¢ Severity: {{.Severity}}
    â€¢ Timestamp: {{.Timestamp}}
    
    ğŸ”§ Recommended Actions:
    â€¢ Investigate memory leaks in workflows
    â€¢ Review workflow memory requirements
    â€¢ Consider memory optimization or scaling
    
    ğŸ“ˆ This alert will not repeat for 3 minutes.
  format: "text"

# API Rate Limit Alert Template
api_limit_alert_template:
  id: "api-limit-alert-template"
  name: "API Rate Limit Alert"
  subject: "ğŸš¦ API Rate Limit Approaching - {{.BudgetName}}"
  body: |
    API request rate is approaching the configured limit.
    
    ğŸ“Š Details:
    â€¢ Budget: {{.BudgetName}}
    â€¢ Scope: {{.Scope}}:{{.ScopeID}}
    â€¢ Current Usage: {{.PercentageUsed}}%
    â€¢ Threshold: 90%
    â€¢ Severity: {{.Severity}}
    â€¢ Timestamp: {{.Timestamp}}
    
    ğŸ”§ Recommended Actions:
    â€¢ Review API usage patterns
    â€¢ Implement request caching if applicable
    â€¢ Consider rate limit adjustments for legitimate use cases
    
    ğŸ“ˆ This alert will not repeat for 10 minutes.
  format: "text"

# Retry Budget Alert Template
retry_alert_template:
  id: "retry-alert-template"
  name: "Retry Budget Alert"
  subject: "ğŸ”„ Retry Budget Alert - {{.BudgetName}}"
  body: |
    Retry budget is approaching the configured limit.
    
    ğŸ“Š Details:
    â€¢ Budget: {{.BudgetName}}
    â€¢ Scope: {{.Scope}}:{{.ScopeID}}
    â€¢ Current Usage: {{.PercentageUsed}}%
    â€¢ Threshold: 80%
    â€¢ Severity: {{.Severity}}
    â€¢ Timestamp: {{.Timestamp}}
    
    ğŸ”§ Recommended Actions:
    â€¢ Investigate failing operations causing retries
    â€¢ Review retry policies and thresholds
    â€¢ Check external service availability
    
    ğŸ“ˆ This alert will not repeat for 15 minutes.
  format: "text"

# Critical System Alert Template
critical_alert_template:
  id: "critical-alert-template"
  name: "Critical System Alert"
  subject: "ğŸš¨ CRITICAL: System Resource Alert - {{.BudgetName}}"
  body: |
    CRITICAL: System resource usage has reached dangerous levels.
    
    ğŸ“Š Details:
    â€¢ Budget: {{.BudgetName}}
    â€¢ Type: {{.BudgetType}}
    â€¢ Scope: {{.Scope}}:{{.ScopeID}}
    â€¢ Current Usage: {{.PercentageUsed}}%
    â€¢ Threshold: 95%
    â€¢ Severity: {{.Severity}}
    â€¢ Timestamp: {{.Timestamp}}
    
    ğŸš¨ IMMEDIATE ACTION REQUIRED:
    â€¢ System may become unstable or unavailable
    â€¢ Investigate and resolve resource constraints immediately
    â€¢ Consider emergency scaling or load reduction
    â€¢ Monitor system health closely
    
    ğŸ“ Escalate to on-call team if necessary.
    ğŸ“ˆ This alert will repeat every minute until resolved.
  format: "text"

# JSON Alert Template (for webhooks/APIs)
json_alert_template:
  id: "json-alert-template"
  name: "JSON Alert Format"
  subject: "Budget Alert"
  body: |
    {
      "alert": {
        "id": "{{.ID}}",
        "budget": "{{.BudgetName}}",
        "type": "{{.BudgetType}}",
        "scope": "{{.Scope}}:{{.ScopeID}}",
        "severity": "{{.Severity}}",
        "usage": {
          "current": "{{.CurrentValue}}",
          "percentage": "{{.PercentageUsed}}",
          "threshold": "{{.Threshold}}"
        },
        "timestamp": "{{.Timestamp}}",
        "message": "Budget constraint violation detected"
      }
    }
  format: "json"

# HTML Alert Template (for rich email notifications)
html_alert_template:
  id: "html-alert-template"
  name: "HTML Alert Format"
  subject: "Budget Alert - {{.BudgetName}}"
  body: |
    <!DOCTYPE html>
    <html>
    <head>
        <style>
            .alert { background: #f8f9fa; padding: 20px; border-left: 4px solid #dc3545; }
            .details { background: #fff; padding: 15px; margin: 10px 0; border-radius: 4px; }
            .critical { border-left-color: #dc3545; }
            .warning { border-left-color: #ffc107; }
            .info { border-left-color: #17a2b8; }
        </style>
    </head>
    <body>
        <div class="alert {{.Severity}}">
            <h2>ğŸš¨ Budget Alert: {{.BudgetName}}</h2>
            
            <div class="details">
                <h3>Details</h3>
                <ul>
                    <li><strong>Budget:</strong> {{.BudgetName}}</li>
                    <li><strong>Type:</strong> {{.BudgetType}}</li>
                    <li><strong>Scope:</strong> {{.Scope}}:{{.ScopeID}}</li>
                    <li><strong>Usage:</strong> {{.PercentageUsed}}%</li>
                    <li><strong>Severity:</strong> {{.Severity}}</li>
                    <li><strong>Time:</strong> {{.Timestamp}}</li>
                </ul>
            </div>
            
            <div class="details">
                <h3>Recommended Actions</h3>
                <p>Please investigate the resource usage and take appropriate action to resolve the constraint violation.</p>
            </div>
        </div>
    </body>
    </html>
  format: "html"

